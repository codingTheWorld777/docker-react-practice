sudo: required

services:
	- docker

before_install:
	- docker build -t luciferro1904/docker-react-practice -f Dockerfile.dev .

script:
	- docker run -e CI=true luciferro1904/docker-react-learning npm run test -- --coverage

deploy:
	provider: elasticbeanstalk
	region: "us-west-2"
	app: "docker"
	env: "Docker-env"
	bucket_name: "elasticbeanstalk-us-west-2-306476627547"
	bucket_path: "docker"
	on:
		branch: master
	access_key_id: $AWS_ACCESS_KEY
	secret_access_key: $AWS_SECRET_KEY
		

# 1. bucket_name: this is where our source code is stored in AWS and 
# it is generated automatically when we create an app in AWS, find it in S3

# 2. access_key_id and secret_access_key are generated by AWS IAM when we create a new user to access AWS, 
# then we create 2 env variables in travis-config with name AWS_ACCESS_KEY and AWS_SECRET_KEY, 
# its values are got from AWS-IAM page after generating.